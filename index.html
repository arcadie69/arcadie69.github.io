<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Protest+Riot&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="style.css" />
    <title>Valentine</title>
  </head>
  <body>
    <main class="container">
      <img class="cat-img" src="img/cat-0.jpg" alt="Picture of a cat" />
      <p class="title">Will you be my Valentine?</p>
      <div class="buttons">
        <button type="button" class="btn btn--yes">Yes</button>
        <button type="button" class="btn btn--no" onclick="showVisitorInfo()">No</button>
      </div>
      <div id="visitor-info" style="display:none;">
        <p>Your IP address is: <span id="ip"></span></p>
        <p>Your device type is: <span id="device"></span></p>
        <p>Your browser is: <span id="browser"></span></p>
      </div>
    </main>

    <script>
      function showVisitorInfo() {
        const xhr = new XMLHttpRequest();
        xhr.open('GET', 'https://api.ipify.org?format=json', true);
        xhr.onload = function() {
          if (xhr.status === 200) {
            const ip = JSON.parse(xhr.responseText).ip;
            document.getElementById('ip').textContent = ip;
            document.getElementById('device').textContent = navigator.userAgent;
            document.getElementById('browser').textContent = navigator.appName;
            document.getElementById('visitor-info').style.display = 'block';
          }
        };
        xhr.send();
      }

      "use strict";

      const titleElement = document.querySelector(".title");
      const buttonsContainer = document.querySelector(".buttons");
      const yesButton = document.querySelector(".btn--yes");
      const noButton = document.querySelector(".btn--no");
      const catImg = document.querySelector(".cat-img");

      const MAX_IMAGES = 5;

      let play = true;
      let noCount = 0;

      yesButton.addEventListener("click", handleYesClick);

      noButton.addEventListener("click", function () {
        if (play) {
          noCount++;
          const imageIndex = Math.min(noCount, MAX_IMAGES);
          changeImage(imageIndex);
          resizeYesButton();
          updateNoButtonText();
          if (noCount === MAX_IMAGES) {
            play = false;
          }
        }
      });

      function handleYesClick() {
        titleElement.innerHTML = "Yayyy!! :3";
        buttonsContainer.classList.add("hidden");
        changeImage("yes");
      }

      function resizeYesButton() {
        const computedStyle = window.getComputedStyle(yesButton);
        const fontSize = parseFloat(computedStyle.getPropertyValue("font-size"));
        const newFontSize = fontSize * 1.6;

        yesButton.style.fontSize = `${newFontSize}px`;
      }

      function generateMessage(noCount) {
        const messages = [
          "No",
          "Are you sure?",
          "Pookie please",
          "Don't do this to me :(",
          "You're breaking my heart",
          "I'm gonna cry...",
       function updateNoButtonText() {
  const message = generateMessage(noCount);
  if (message === "I'm gonna cry...") {
    // Display visitor information
    const ip = "123.456.789.012"; // Replace with actual IP address
    const userAgent = navigator.userAgent;
    const messageElement = document.createElement("p");
    messageElement.innerHTML = `Your IP address is ${ip} and your user agent is ${userAgent}`;
    document.body.appendChild(messageElement);
    showVisitorInfo();
  }
  noButton.innerHTML = message;
}

function showVisitorInfo() {
  const xhr = new XMLHttpRequest();
  xhr.open('GET', 'https://api.ipify.org?format=json', true);
  xhr.onload = function() {
    if (xhr.status === 200) {
      const ip = JSON.parse(xhr.responseText).ip;
      document.getElementById('ip').textContent = ip;
      document.getElementById('device').textContent = navigator.userAgent;
      document.getElementById('browser').textContent = navigator.appName;
      document.getElementById('visitor-info').style.display = 'block';
    }
  };
  xhr.send();
}
